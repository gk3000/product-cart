{
  "version": 3,
  "sources": [
    "bundle.js"
  ],
  "names": [
    "View",
    "template",
    "value",
    "compiled",
    "console",
    "log",
    "BrowserView",
    "name",
    "undefined",
    "$",
    "children",
    "remove",
    "key",
    "db",
    "eventName",
    "eventPrice",
    "price",
    "number",
    "eventBlock",
    "appendTo",
    "document",
    "getElementById",
    "textContent",
    "JSON",
    "stringify",
    "Model",
    "nextId",
    "values",
    "push",
    "val",
    "newValue",
    "eventID",
    "quantity",
    "parseInt",
    "i",
    "Cart",
    "Event",
    "Controller",
    "model",
    "view",
    "render",
    "getAll",
    "valueNew",
    "update",
    "updateQuantity",
    "addOne",
    "BrowserController",
    "meth",
    "arg1",
    "arg2",
    "mod",
    "brvw",
    "brcn",
    "updating",
    "event",
    "preventDefault",
    "browse",
    "target",
    "closest",
    "find",
    "text",
    "ready",
    "sum",
    "each",
    "ele",
    "toFixed",
    "removeFromCart",
    "runnin"
  ],
  "mappings": "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",
  "file": "bundle.js",
  "sourceRoot": "../src",
  "sourcesContent": [
    "class View {\n  constructor(template) {\n    this.template = template;\n  }\n\n  render(value) {\n    var compiled = this.template + value;\n    console.log(compiled);\n  }\n}\n\nclass BrowserView extends View {\n  constructor(template) {\n    super(template);\n  }\n\nrender(name) {\n    if (name !== undefined) {\n      //document.getElementById(\"display\").textContent=this.template + ' ' + name;\n      //document.getElementById(\"eventsList\").appendTo('eventsList')('<p>TEST</p>')\n      $( \"div#eventsList\" ).children().remove()\n      for (var key in this.db) {\n        console.log(\"----db-----\", this.db)\n        var eventName = this.db[key].name\n        var eventPrice = this.db[key].price*this.db[key].number\n       $(eventBlock(this.db[key].name, this.db[key].price*this.db[key].number) ).appendTo( \"#eventsList\" )\n      } \n      } else {\n        document.getElementById(\"display\").textContent=\"that doesn't exist\";\n        document.getElementById(\"db\").textContent=JSON.stringify(this.db);\n    }  \n  }\n}\n\nclass Model {\n  constructor() {\n    this.db = {};\n    this.nextId = this.nextId || 0;\n  }\n\n  addOne(name, price) {\n    this.db[this.nextId] = {};\n    this.db[this.nextId].price = price;\n    this.db[this.nextId].name = name;\n    this.db[this.nextId].number = 1;\n    this.nextId ++;\n  }\n\n  getOne(key) {\n    return this.db[key];\n  }\n\n  getAll() {\n    var values = [];\n    for (var key in this.db) {\n      values.push(this.db[key].val)\n    }\n    return values;\n  }\n\n  update(name, newValue) {\n    for (var key in this.db){\n      if (this.db[key].name === name) {\n        var eventID = key\n      }\n    }\n    this.db[eventID].price = newValue;      \n  }\n\n  updateQuantity(name, quantity) {\n    var eventID\n    for (var key in this.db){\n      if (this.db[key].name == name) {\n        eventID = key\n\n      }\n    }\n    this.db[eventID].number = parseInt(quantity);      \n  }\n\n\n  remove(key) {\n    var eventID\n    for (var i in this.db){\n\n      if (this.db[i].name == key) {\n        eventID = i\n      }\n    }\n      delete this.db[eventID]\n    }\n}\n\nclass Cart extends Model {\n\n}\n\nclass Event extends Model {\n\n}\n\nclass Controller {\n  constructor(model, view) {\n    this.model = model;\n    this.view = view;\n    // quite hackly\n    this.view.db = this.model.db;\n  }\n\n  getOne(key) {\n    var value = this.model.db[key].val;\n    this.view.render(value)\n  }\n\n  getAll() {\n    this.view.render(this.model.getAll());\n  }\n\n  update(name, valueNew) {\n\n    this.model.update(name, valueNew);\n    this.view.render(this.model.getAll());\n  }\n\n  updateQuantity(name, quantity) {\n    this.model.updateQuantity(name, quantity);\n    this.view.render(this.model.getAll());\n  }\n\n  post(key, value) {\n    this.model.addOne(key, value);\n    this.getAll();\n  }\n\n  remove(key) {\n    this.model.remove(key);\n    this.getAll();\n  }\n}\n\nclass BrowserController extends Controller {\n  browse(meth, arg1, arg2) {\n    this[meth](arg1, arg2);\n  }\n\n\n}\n\n// class AsyncController extends BrowserController {\n\n//   constructor() {\n//     super()\n//     // connection\n//   }\n\n//   post(key, value) {\n//     super(key, value);\n//     // post to server\n//     // and error catching if you desire\n//   }\n// }\n\n//-----------------------------\n\nconst eventBlock = (name, price) => `\n<div class=\"thumbnail\">\n<h2 id=\"db\">${name}</h2>\n<form>\n<select class=\"form-control\" data-toggle=\"tooltip\" id=\"quantitySelector\" data-placement=\"bottom\" title=\"Change the quantity\">\n<option value=\"1\" selected=\"selected\">1</option>\n<option value=\"2\">2</option>\n<option value=\"3\">3</option>\n<option value=\"4\">4</option>\n<option value=\"5\" >5</option></select>\n<button onclick=\"updating(event)\" class=\"btn btn-default\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Update\" name=\"updateQuantity\">Update</button>\n<button onclick=\"removeFromCart(event)\" type=\"button\" class=\"btn btn-default\" aria-label=\"Delete\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete\"><span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span></button>\n</form>\n<p class=\"thumbnail pull-right\"><strong>Price: </strong>€<span id=\"display\" class=\"price\">${price}</span></p>\n</div>\n`\n\nvar mod = new Model();\nvar brvw = new BrowserView(' ');\nvar brcn = new BrowserController(mod, brvw)\n\nvar updating = function(event) {\n  event.preventDefault()\n  brcn.browse(\"updateQuantity\", $(event.target).closest(\"div\").find(\"#db\").text(), $(event.target).closest(\"div\").find(\"#quantitySelector option:selected\").text());\n $( document ).ready(function() {\n  let sum = 0\n  $(\".price\").each((i, ele) => {\n    sum += parseInt($(ele).text())\n  })\n  $(\"#cartTot\").text(sum)\n  $(\"#Total\").text((sum+sum*0.21).toFixed(2))\n})\n};\n\nvar removeFromCart = function(event) {\n  event.preventDefault()\n\n  brcn.browse(\"remove\", $(event.target).closest(\"div\").find(\"#db\").text());\n$( document ).ready(function() {\n  let sum = 0\n  $(\".price\").each((i, ele) => {\n    sum += parseInt($(ele).text())\n  })\n  $(\"#cartTot\").text(sum)\n  $(\"#Total\").text((sum+sum*0.21).toFixed(2))\n})\n};\n\nvar runnin = function(name, price) {\n brcn.browse(\"post\", name, price);\n\n$( document ).ready(function() {\n  let sum = 0\n  $(\".price\").each((i, ele) => {\n    sum += parseInt($(ele).text())\n  })\n  $(\"#cartTot\").text(sum)\n  $(\"#Total\").text((sum+sum*0.21).toFixed(2))\n})\n};\n\n\n\n"
  ]
}
